\documentclass{article}
\usepackage{url}
\usepackage{hyperref}
\usepackage[pdftex]{graphicx}
\usepackage{geometry}

\title{CS444 Operating Systems II, HW2 Writeup}
\author{Brandon Dring, William Buffum \& Samuel Jacobs}
\date{May 7th, 2017}
\vfill


\begin{document}
\begin{titlepage}

\center

\textsc{\LARGE \hspace{15mm} Homework 2 Writeup} \newline \newline
{\large CS 444 Spring 2017}



\begin{minipage}{0.4\textwidth}
   \begin{flushleft} \large
      \emph{Authors:}\\
      Brandon Dring \\
      Billy Buffum \\
      Samuel Jacobs
   \end{flushleft}
\end{minipage}
~
\begin{minipage}{0.4\textwidth}
   \begin{flushright} \large
      \emph{Professor:} \\
      Dr. Kevin \textsc{McGrath} % Supervisor's Name
   \end{flushright}
\end{minipage} \\ [4cm]

{\large May 7th, 2017}
\vfill % Fill the rest of the page with whitespace

\begin{abstract}
    Here we are looking at how to implement a RAM disk driver that also does encryption and decryption at the block level under the file system. This implementation is done by using the Linux Crypto API from the linux-yocto-3.14 which notoriously has terrible documentation.
\end{abstract}

\pagebreak

\end{titlepage}
\newpage
\special{papersize=8.5in,11in}
\setlength{\pdfpageheight}{\paperheight}
\setlength{\pdfpagewidth}{\paperwidth}


\section{Design}
    For the most part the only design that needed to be done was trying to figure out how to test and simply get the RAM disk running on the VM. As stated by McGrath he pointed us to most of the stuff that we needed such as the basic disk driver. The encryption documentation could be found across the Internet. The only thing needed for encryption was to initialize the device, remove it, and encrypt / decrypt blocks as they came in. And add select print statements for debugging, tracing, and testing to ensure the solution was correct.


\section{Work Log}
\begin{itemize}
    \item     Group meeting about basic project requirements 5/9/17
    \item Sam set up Kconfig \& Makefile to support new files for assignment 5/16/17
    \item Sam went to see Kevin during Office hours on Thursday 5/18/17
    \item Brandon found website \url{https://01.org/linuxgraphics/gfx-docs/drm/crypto/api-skcipher.html#single-block-cipher-api} and
    \url{http://elixir.free-electrons.com/linux/latest/source/include/linux/crypto.h#L1479}  that explained the linux crypto API
    \item     Group came over to Brandon’s house to finish assignment 5/20/17
    \item     Brandon writes post assignment writeup 5/21/17

\end{itemize}

\section{VCS}
\begin{tabular}{l l l}\textbf{Detail} & \textbf{Author} & \textbf{Description}\\\hline
\href{https://github.com/El-Dringo-Brannde/CS444/commit/1040abe06276b44779d7090f4dcf3f12aa14f5ff}{1040abe} & El-Dringo-Brannde & Initial commit\\\hline
\href{https://github.com/El-Dringo-Brannde/CS444/commit/4bbf81171861f808e93ce47478cca496c0b0fe89}{4bbf811} & El-Dringo-Brannde & Started on Producer\\\hline
\href{https://github.com/El-Dringo-Brannde/CS444/commit/840842e72c16c3dd8c5a4971e0ce27ce91b65e69}{840842e} & El-Dringo-Brannde & Test\\\hline
\href{https://github.com/El-Dringo-Brannde/CS444/commit/dfd33841d968202f1a7e17cad93e5171b0686031}{dfd3384} & El-Dringo-Brannde & Producer is now.. Producing\\\hline
\href{https://github.com/El-Dringo-Brannde/CS444/commit/0c3e4d1e938f4b736ec4c0db4342038bd5dbc06a}{0c3e4d1} & El-Dringo-Brannde & fixed a bug\\\hline
\href{https://github.com/El-Dringo-Brannde/CS444/commit/63a39d9f2c3d49abb6fcdd5bfc623eb6ac356553}{63a39d9} & El-Dringo-Brannde & Cleaned up code\\\hline
\href{https://github.com/El-Dringo-Brannde/CS444/commit/e2cd7a11800994774664033637c8bcd272c74500}{e2cd7a1} & El-Dringo-Brannde & Added pthread_cond\\\hline
\href{https://github.com/El-Dringo-Brannde/CS444/commit/6e508cad4770626bda31e3f012b218896bf1cf7c}{6e508ca} & El-Dringo-Brannde & Init\\\hline
\href{https://github.com/El-Dringo-Brannde/CS444/commit/7ef8edc8e4f22f96c3244cd9075975966d6096c0}{7ef8edc} & El-Dringo-Brannde & Yeah go to hell stupid philosophers\\\hline
\href{https://github.com/El-Dringo-Brannde/CS444/commit/6d030800ec382b329314ca25581e016269790a0c}{6d03080} & samtjacobs & Added rdrand, consumre\\\hline
\href{https://github.com/El-Dringo-Brannde/CS444/commit/2ed62596d4850551f192b7e5b8175e69526b1bd8}{2ed6259} & samtjacobs & Style changes\\\hline
\href{https://github.com/El-Dringo-Brannde/CS444/commit/6cb351f9c34417f60e7f8d71a179d2eb09c335b4}{6cb351f} & El-Dringo-Brannde & Turn in ready\\\hline
\href{https://github.com/El-Dringo-Brannde/CS444/commit/14b1d306e9d1f67d1826a2e3264f9e88ecc7aca2}{14b1d30} & El-Dringo-Brannde & Merge branch 'master' of https://github.com/El-Dringo-Brannde/CS444\\\hline
\href{https://github.com/El-Dringo-Brannde/CS444/commit/b156e61fdf6792555162b1e4dcd74d6cd2be8e0f}{b156e61} & El-Dringo-Brannde & Real turn in ready\\\hline
\href{https://github.com/El-Dringo-Brannde/CS444/commit/ea2bf27826aeaca0e6569fe4f30d000e668cf2f9}{ea2bf27} & WilliamBuffum & added commandline arguments for user to specify number of each thread\\\hline
\href{https://github.com/El-Dringo-Brannde/CS444/commit/b34f487448d60dbf56a5fd32ce0b26f427761d85}{b34f487} & El-Dringo-Brannde & Fixed negative index issue added some debug stuff\\\hline
\href{https://github.com/El-Dringo-Brannde/CS444/commit/b6f0da086658854d9b7f1fff40dddab9daa5fd8d}{b6f0da0} & samtjacobs & Added makefile\\\hline
\href{https://github.com/El-Dringo-Brannde/CS444/commit/e8b356d587abec4a48ff17831b3add9dd65beed8}{e8b356d} & El-Dringo-Brannde & Fixed multithreading issue and code style changes\\\hline
\href{https://github.com/El-Dringo-Brannde/CS444/commit/a3a5eeb12a08ea588169d791e8f8844412934deb}{a3a5eeb} & El-Dringo-Brannde & Found a script that creates git log in latex table\\\hline
\href{https://github.com/El-Dringo-Brannde/CS444/commit/d8cd6e3a9ee9ba809f21952e055c80bb47055b0c}{d8cd6e3} & El-Dringo-Brannde & Turn in ready\\\hline
\href{https://github.com/El-Dringo-Brannde/CS444/commit/b6f06421b7c590409520447b51ec71ed95ca60a5}{b6f0642} & El-Dringo-Brannde & Semi complete turn in ready makefile needs help\\\hline
\href{https://github.com/El-Dringo-Brannde/CS444/commit/60ad77c85f328d5b329d66cda0133c254308fa48}{60ad77c} & Brandon Lee Dring & Create Readme.md\\\hline
\href{https://github.com/El-Dringo-Brannde/CS444/commit/c74c35c7e9a1455392f57591660ae02fe2c1f776}{c74c35c} & El-Dringo-Brannde & Test\\\hline
\href{https://github.com/El-Dringo-Brannde/CS444/commit/6002ee5bb3ce04d897c370b8d93dc5c39a8e32f7}{6002ee5} & El-Dringo-Brannde & New folders\\\hline
\href{https://github.com/El-Dringo-Brannde/CS444/commit/b84a135eee6a492fbac9a32c05ee8afeb1f908ec}{b84a135} & El-Dringo-Brannde & Writing Assignment 1 Done\\\hline
\href{https://github.com/El-Dringo-Brannde/CS444/commit/df1defdce23c915890015ac6c77d43cd0fc0a5ba}{df1defd} & El-Dringo-Brannde & Added Kernel\\\hline
\href{https://github.com/El-Dringo-Brannde/CS444/commit/7b19fbf98aa4c0983fe7908ec3d2381fdcdbf0ad}{7b19fbf} & El-Dringo-Brannde & Python script that generates infinite IO until killed\\\hline
\href{https://github.com/El-Dringo-Brannde/CS444/commit/75770e0be37789c985f96a3e4c02f59244f19cc8}{75770e0} & samtjacobs & Created new version of sstf\\\hline
\href{https://github.com/El-Dringo-Brannde/CS444/commit/19219e60da859a6b18954749c991735f5185c59b}{19219e6} & samtjacobs & Added second sort\\\hline
\href{https://github.com/El-Dringo-Brannde/CS444/commit/e60063546eaa7edbc6272fe5e5a2dcb146c93fff}{e600635} & samtjacobs & Added print fxn\\\hline
\href{https://github.com/El-Dringo-Brannde/CS444/commit/93f4484c07c650db6502090d236bfd692f2b9d67}{93f4484} & samtjacobs & Fixed typos\\\hline
\href{https://github.com/El-Dringo-Brannde/CS444/commit/b09894a02bf494906d0421bca366ac81b65deb50}{b09894a} & samtjacobs & Added merging\\\hline
\href{https://github.com/El-Dringo-Brannde/CS444/commit/09961b417b5e7c73ad39040b2a7116e6bea3cbd8}{09961b4} & El-Dringo-Brannde & Test Suite for HW2\\\hline
\href{https://github.com/El-Dringo-Brannde/CS444/commit/87d358b3677bae7e382259d9af00040017712daf}{87d358b} & Brandon Lee Dring & Merge pull request #1 from El-Dringo-Brannde/hw2\\\hline
\href{https://github.com/El-Dringo-Brannde/CS444/commit/a10b908992a09e23682976d93e00dfcc8bac7387}{a10b908} & El-Dringo-Brannde & Writeup stuff added\\\hline
\href{https://github.com/El-Dringo-Brannde/CS444/commit/c8289224be2700286b0122df7965092b20d257b7}{c828922} & samtjacobs & Added Patch\\\hline
\href{https://github.com/El-Dringo-Brannde/CS444/commit/9cdf4f07cb69b97f9328eba9f6790dfc3db066fc}{9cdf4f0} & El-Dringo-Brannde & Rough build of CME problem\\\hline
\href{https://github.com/El-Dringo-Brannde/CS444/commit/e7ccf3c611136f5f8c9beb7973d112d647ae1198}{e7ccf3c} & El-Dringo-Brannde & Merge branch 'master' of https://github.com/El-Dringo-Brannde/CS444\\\hline
\href{https://github.com/El-Dringo-Brannde/CS444/commit/d5464b217ad9ba8060fd2f8d129637663bb9ca3a}{d5464b2} & El-Dringo-Brannde & Holy hackintosh it works\\\hline
\href{https://github.com/El-Dringo-Brannde/CS444/commit/131dcf9dd7d9a5064453aa7579bb7d3788197e56}{131dcf9} & El-Dringo-Brannde & Turn in ready?\\\hline
\href{https://github.com/El-Dringo-Brannde/CS444/commit/8ade507f85e8c75df3d536ae1661f14a9d5b8dfe}{8ade507} & El-Dringo-Brannde & So close..\\\hline
\href{https://github.com/El-Dringo-Brannde/CS444/commit/3d7f650ae071d50dc6971de9e1e513812ea66ed7}{3d7f650} & El-Dringo-Brannde & FINALLY!!!\\\hline
\href{https://github.com/El-Dringo-Brannde/CS444/commit/59bf7e123dab0ec117af1d3dd691e5ad19bd0bb8}{59bf7e1} & El-Dringo-Brannde & Turn in ready\\\hline
\href{https://github.com/El-Dringo-Brannde/CS444/commit/c46c3e440a2abcb5f7e84355b5f2edab285e31de}{c46c3e4} & El-Dringo-Brannde & Initial files to help with creating block devices\\\hline
\href{https://github.com/El-Dringo-Brannde/CS444/commit/bdfa88ccb79b211a4c40b5f265821ed239939cec}{bdfa88c} & El-Dringo-Brannde & Crypto set up done..? Maybe\\\hline
\href{https://github.com/El-Dringo-Brannde/CS444/commit/55d8d90d4e46f89dec05ccae1516ca4e5d92b735}{55d8d90} & El-Dringo-Brannde & Encryption not working?\\\hline
\href{https://github.com/El-Dringo-Brannde/CS444/commit/d3340f45a4840a2d1b276dd7cf42580253cc1db4}{d3340f4} & El-Dringo-Brannde & Working encryption I think\\\hline
\href{https://github.com/El-Dringo-Brannde/CS444/commit/53c9bec7d0583d604b5ece65864842ad30888efb}{53c9bec} & El-Dringo-Brannde & demoScript added.\\\hline\end{tabular}


\section{Follow Up Questions}
\subsection{What do you think the main point of this assignment is?}
    The main point of the assignment seemed to be how to get something working with almost no documentation. If you look at the crypto library in the Linux kernel you see that there is literally NO documentation for their crypto API, which might be on purpose since it’d just make it harder to crack.
    But this assignment also has the task of creating a module for the linux kernel, and having to have a module parameter.
    Oh and of course trying to create a file system from a RAM disk, partitioning and mounting it.
\subsection{How did you personally approach the problem? Design decisions, algorithm, etc.}
    First we looked online at just trying to get any documentation at all for the linux crypto API. Luckily, there are some kind souls that have documented it for us, which is nice. Then we looked at sbd.c and sbull.c source code for the code that actually creates the file system and handles requests

We also looked how to create, partition, and mount, a RAM disk to store the file system to be encrypted.
\subsection{How did you ensure your solution was correct? Testing details, for instance.}
    For testing we wrote a simple little script to create some text in a file, then we did a cat operation on the device to return the garbled text since the file isn't being decrypted when read. Then the script does a cat operation on the mount point of the drive to the file and when it does that it returns clear text. Demonstrating that the file encryption and decryption does indeed work since encryption level stuff works on the mount point not the device.
\subsection{What did you learn?}
        We learned how to use a rough version of the linux crypto API to encrypt stuff at the block level, and to create a linux module and embed it in a VM while it is running. And how to create a RAM disk on Linux, partition, and mount it.

\end{document}
